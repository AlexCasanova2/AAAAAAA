import{c as v}from"./arrow-left-7li7JSlN.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as s,z as E,p as F,j as I,a as L,o as g,b as h,e as S,x,n as _,d as b}from"./index-DGUlPAX8.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=v("FolderIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=v("MicIcon",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=v("PauseIcon",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=v("PlayIcon",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=v("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),U={class:"flex items-center space-x-2"},z={__name:"AudioPlayer",props:{src:{type:String,required:!0},darkMode:{type:Boolean,default:!1}},setup(p){const k=p,e=s(null),o=s(!1),m=s(0),A=s(0),y=s(0),f=s(null);let c=null;const w=()=>{e.value&&o.value&&(m.value=e.value.currentTime,y.value=e.value.currentTime/e.value.duration*100||0,c=requestAnimationFrame(w))};E(()=>{e.value=new Audio,e.value.preload="metadata",e.value.crossOrigin="anonymous",e.value.addEventListener("loadedmetadata",()=>{var a,r,t,l,u,n;console.log("Audio cargado:",{duration:(a=e.value)==null?void 0:a.duration,readyState:(r=e.value)==null?void 0:r.readyState,src:(t=e.value)==null?void 0:t.src,networkState:(l=e.value)==null?void 0:l.networkState,error:(u=e.value)==null?void 0:u.error}),A.value=((n=e.value)==null?void 0:n.duration)||0,f.value=null}),e.value.addEventListener("error",a=>{var r,t,l,u,n,i,d;console.error("Error de audio:",{error:a,code:(t=(r=e.value)==null?void 0:r.error)==null?void 0:t.code,message:(u=(l=e.value)==null?void 0:l.error)==null?void 0:u.message,src:(n=e.value)==null?void 0:n.src,networkState:(i=e.value)==null?void 0:i.networkState,readyState:(d=e.value)==null?void 0:d.readyState}),o.value=!1,f.value=!0}),e.value.addEventListener("play",()=>{var a,r,t;console.log("Reproducción iniciada:",{src:(a=e.value)==null?void 0:a.src,currentTime:(r=e.value)==null?void 0:r.currentTime,duration:(t=e.value)==null?void 0:t.duration}),o.value=!0,f.value=!1,w()}),e.value.addEventListener("pause",()=>{var a,r;console.log("Reproducción pausada:",{src:(a=e.value)==null?void 0:a.src,currentTime:(r=e.value)==null?void 0:r.currentTime}),o.value=!1,cancelAnimationFrame(c)}),e.value.addEventListener("ended",()=>{var a,r;console.log("Reproducción finalizada:",{src:(a=e.value)==null?void 0:a.src,duration:(r=e.value)==null?void 0:r.duration}),o.value=!1,m.value=0,y.value=0,cancelAnimationFrame(c)}),e.value.addEventListener("timeupdate",()=>{e.value&&(m.value=e.value.currentTime)}),k.src&&(e.value.src=k.src,e.value.load())}),F(()=>{e.value&&(e.value.pause(),cancelAnimationFrame(c),e.value=null)});const M=async()=>{var a,r,t;if(!e.value){console.error("No hay elemento de audio disponible");return}try{if(o.value)console.log("Pausando reproducción"),await e.value.pause();else{console.log("Intentando reproducir:",{src:e.value.src,readyState:e.value.readyState,networkState:e.value.networkState});const l=e.value.play();l!==void 0&&l.catch(u=>{var n,i,d;console.error("Error al reproducir:",{error:u,src:(n=e.value)==null?void 0:n.src,readyState:(i=e.value)==null?void 0:i.readyState,networkState:(d=e.value)==null?void 0:d.networkState}),o.value=!1,u.value=!0})}}catch(l){console.error("Error al controlar la reproducción:",{error:l,src:(a=e.value)==null?void 0:a.src,readyState:(r=e.value)==null?void 0:r.readyState,networkState:(t=e.value)==null?void 0:t.networkState}),o.value=!1,l.value=!0}},P=a=>{if(!e.value||!e.value.duration)return;const r=a.currentTarget,t=a.clientX-r.getBoundingClientRect().left,l=r.offsetWidth,u=t/l*e.value.duration;e.value.currentTime=u};return I(()=>k.src,a=>{console.log("Nueva URL de audio:",a),e.value&&(e.value.pause(),cancelAnimationFrame(c),o.value=!1,m.value=0,y.value=0,f.value=null,e.value.src=a,e.value.load())},{immediate:!0}),(a,r)=>(g(),L("div",U,[h("button",{onClick:M,class:"p-1 focus:outline-none focus:ring-0 bg-gradient-to-br from-red-500 to-red-600 bg-clip-text text-white"},[o.value?(g(),S(x(B),{key:1,class:"w-5 h-5 fill-current"})):(g(),S(x(R),{key:0,class:"w-5 h-5 fill-current"}))]),h("div",{class:b(["flex-1 relative h-1 rounded-full cursor-pointer",p.darkMode?"bg-white/10":"bg-[white]/10"]),onClick:P},[h("div",{class:b(["absolute h-full rounded-full",(p.darkMode,"bg-white")]),style:_({width:`${y.value}%`})},null,6)],2)]))}},X=T(z,[["__scopeId","data-v-0b183c0a"]]);export{X as A,V as F,q as M,H as U};
